(this["webpackJsonpbar-chart-demo"]=this["webpackJsonpbar-chart-demo"]||[]).push([[0],{139:function(t,n,e){},142:function(t,n,e){"use strict";e.r(n);var r=e(2),a=e.n(r),c=e(31),i=e.n(c),s=(e(139),e(1)),o=e(0),u=50,l=1e3-u-30,d=400-20-50;var f=function(t){var n=t.data,e=Object(r.useRef)(),a=n.map((function(t){return t.time})),c=Object.keys(n[0]).slice(1),i=s.j().keys(c)(n),f=s.h().domain(c).range(["pink","magenta","purple","green","lightblue"]),b=s.f().range([0,l]).padding([.2]),p=s.g().rangeRound([d,0]),h=Object(r.useCallback)((function(){var t=s.i(e.current);b.domain(a),t.select(".x-axis").call(s.b(b)).selectAll("text").text((function(t){return t.slice(11)})).attr("transform","translate(-13,26) rotate(-90)"),p.domain([0,1.2*s.e(n,(function(t){return s.k(Object.values(t))}))]),t.select(".y-axis").transition().call(s.c(p)),t.selectAll("g.stacks").selectAll("g.stack").data(i).join((function(t){var n=t.append("g").attr("class",(function(t){return"stack ".concat(t.key)}));return n.append("g").attr("class","bars").attr("fill",(function(t){return f(t.key)})),j(n.select(".bars")),n}),(function(t){j(t.select(".bars"))}))}),[n]),j=function(t){t.selectAll("rect").data((function(t){return t})).join((function(t){return t.append("rect").attr("class","bar").attr("height",(function(t){return p(t[0])-p(t[1])})).attr("width",b.bandwidth()).attr("x",(function(t){return b(t.data.time)})).attr("y",(function(t){return p(t[1])})).attr("stroke","grey").style("opacity",0).call((function(t){return t.transition().duration(500).style("opacity",1)})).on("mouseover",x).on("mouseleave",g)}),(function(t){t.transition().attr("height",(function(t){return p(t[0])-p(t[1])})).attr("width",b.bandwidth()).attr("x",(function(t){return b(t.data.time)})).attr("y",(function(t){return p(t[1])}))}))},x=function(){var t=s.i(this.parentNode).datum().key;s.i(e.current).selectAll(".bar").style("opacity",.2),s.i(e.current).selectAll(".".concat(t," rect")).style("opacity",1)},g=function(){s.i(e.current).selectAll(".bar").style("opacity",.8)};return Object(r.useEffect)((function(){var t=s.i(e.current);t.attr("width",1e3).attr("height",400).append("g").attr("class","stacks").attr("transform","translate(".concat(u,")")),t.append("g").attr("class","x-axis").attr("transform","translate(".concat(u,", ").concat(d,")")),t.append("g").attr("class","y-axis").attr("transform","translate(".concat(u,")"))}),[]),Object(r.useEffect)((function(){h()}),[n,h,e.current]),Object(o.jsx)("div",{style:{padding:"10px 0"},children:Object(o.jsx)("svg",{ref:e})})},b=50,p=1e3-b-30,h=300-20-50;var j=function(t){var n=t.data,e=Object(r.useRef)(),a=s.f().range([0,p]).padding(.3),c=s.g().range([h,0]),i=function(t){return"translate(".concat(a.bandwidth()/2,t>10?", 15)":", -2)")},u=Object(r.useCallback)((function(){var t=s.i(e.current);a.domain(Object.keys(n)),t.select(".x-axis").call(s.b(a)).selectAll("text").text((function(t){return+t+1})),c.domain([0,1.1*s.e(n)]),t.select(".y-axis").transition().call(s.c(c)),t.selectAll(".bars").selectAll(".bar").data(n).join((function(t){var n=t.append("g").attr("class","bar");return n.append("rect").attr("x",(function(t,n){return a(n)})).attr("y",(function(t){return c(t)})).attr("height",(function(t){return h-c(t)})).attr("width",a.bandwidth()).attr("stroke-width",1).attr("stroke","black").attr("fill","pink"),n.append("text").text((function(t){return t})).join("text").attr("x",(function(t,n){return a(n)})).attr("y",(function(t){return c(t)})).attr("transform",i).attr("text-anchor","middle"),n}),(function(t){t.select("rect").transition().attr("x",(function(t,n){return a(n)})).attr("y",(function(t){return c(t)})).attr("height",(function(t){return h-c(t)})).attr("width",a.bandwidth()),t.select("text").transition().text((function(t){return t})).attr("x",(function(t,n){return a(n)})).attr("y",(function(t){return c(t)})).attr("transform",i)}),(function(t){t.select("text").remove(),t.select("rect").transition().style("opacity",0),t.transition().remove()}))}),[n,h,p]);return Object(r.useEffect)((function(){var t=s.i(e.current);t.attr("width",1e3).attr("height",300).append("g").attr("class","bars").attr("transform","translate(".concat(b,")")),t.append("g").attr("class","x-axis").attr("transform","translate(".concat(b,", ").concat(h,")")),t.append("g").attr("class","y-axis").attr("transform","translate(".concat(b,")"))}),[]),Object(r.useEffect)((function(){u()}),[n,u,e.current]),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){n.sort((function(t,n){return s.a(t,n)})),u()},children:"asc"}),Object(o.jsx)("button",{onClick:function(){n.sort((function(t,n){return s.d(t,n)})),u()},children:"desc"})]}),Object(o.jsx)("div",{style:{padding:"10px 0"},children:Object(o.jsx)("svg",{ref:e})})]})};function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(Math.random()*(t-n)+n)}var g=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=[],e=x(25,10),r=0;r<e;r++)n.push({time:"2021-05-05 10:00:0".concat(r),cat:x(t),dog:x(t),fish:x(t),cow:x(t),mouse:x(t)});return n},m=function(){for(var t=[],n=x(25,10),e=0;e<n;e++)t.push(x(100,1));return t},v=e(8),y=function(t){var n=t.componentProp,e=t.getData,a=Object(r.useState)(e()),c=Object(v.a)(a,2),i=c[0],s=c[1],u=n;return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:function(){return s(e())},children:"Update Data"})}),Object(o.jsx)(u,{data:i})]})},O=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(y,{componentProp:f,getData:g}),Object(o.jsx)(y,{componentProp:j,getData:m})]})};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.e621db3c.chunk.js.map